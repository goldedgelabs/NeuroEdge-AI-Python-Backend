addEventListener('fetch', event=>{ event.respondWith(handle(event.request)); }); async function handle(req){ const url=new URL(req.url); if(url.pathname.startsWith('/proxy/')){ const enc = url.pathname.replace('/proxy/',''); try{ const target = decodeURIComponent(enc); return fetch(target, { method:req.method, headers:req.headers, body:req.body }); }catch(e){ return new Response('Bad proxy',{status:400}); } } return new Response('Not found',{status:404}); }